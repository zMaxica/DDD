local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local TeleportService = game:GetService("TeleportService")
local HttpService = game:GetService("HttpService")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoidRootPart = character:WaitForChild("HumanoidRootPart")

local collectFolder = Workspace:FindFirstChild("Collect")

-- üè† ‡πÄ‡∏ä‡πá‡∏Ñ‡πÅ‡∏°‡∏û‡∏Å‡πà‡∏≠‡∏ô
local farmMapId = 86392425558311
local safeZoneMapId = 133649758958568
local currentMapId = game.PlaceId

if currentMapId == safeZoneMapId then
    -- üéØ ‡πÅ‡∏°‡∏û‡∏ó‡∏µ‡πà‡∏ß‡∏≤‡∏£‡πå‡∏õ‡∏°‡∏≤ ‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏≤‡∏£‡πå‡∏ï‡∏µ‡πâ Hard Mode
    print("üöÄ ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÅ‡∏°‡∏û Safe Zone! ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏≤‡∏£‡πå‡∏ï‡∏µ‡πâ Hard Mode...")

    local args1 = { [1] = "createParty", [2] = "zMaxikax's Party", [3] = 4 }
    ReplicatedStorage.PartySystemREHard:FireServer(unpack(args1))

    task.wait(1)

    local args2 = { [1] = "startParty", [2] = "zMaxikax's Party" }
    ReplicatedStorage.PartySystemREHard:FireServer(unpack(args2))

    print("üéâ ‡∏õ‡∏≤‡∏£‡πå‡∏ï‡∏µ‡πâ Hard Mode ‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß! ‡∏´‡∏¢‡∏∏‡∏î‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå")
    return
elseif currentMapId ~= farmMapId then
    warn("‚ùå ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÅ‡∏°‡∏û‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! ‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå")
    return
end

print("‚úÖ ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÅ‡∏°‡∏û‡∏ü‡∏≤‡∏£‡πå‡∏°! ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏ä‡πá‡∏Ñ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô...")

-- üì° ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô
local detectionRadius = 2500 -- ‡∏£‡∏∞‡∏¢‡∏∞‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö
local safeZonePlaceID = 133649758958568 -- Place ID ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏£‡πå‡∏õ‡πÑ‡∏õ
local safePlayers = { "testerloadsss", "DarkFalcon_Z", "zMaxica", "testerloadxxx" } -- ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ß‡∏≤‡∏£‡πå‡∏õ‡∏´‡∏ô‡∏µ

-- üìå ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ß‡∏≤‡∏£‡πå‡∏õ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô
local function teleportPlayer(targetPlayer)
    TeleportService:Teleport(safeZonePlaceID, targetPlayer)
end

-- üö® ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡πà‡∏á Discord Webhook
local function sendDiscordAlert()
    local OSTime = os.time()
    local Time = os.date('!*t', OSTime)
    local Content = 'Found a player, teleporting to a safe zone!'
    local Embed = {
        title = 'üö® Nearby Player Detected!',
        color = 99999,
        footer = { text = game.JobId },
        author = { name = 'ROBLOX', url = 'https://www.roblox.com/' },
        fields = { { name = 'Teleporting...', value = 'Player is now moving to a safer place.' } },
        timestamp = string.format('%d-%d-%dT%02d:%02d:%02dZ', Time.year, Time.month, Time.day, Time.hour, Time.min, Time.sec),
    }
    
    (syn and syn.request or http_request) {
        Url = 'https://discord.com/api/webhooks/1120037043200856174/64TZOaooeaqUMb5xqDAOKxODppDYATkNhGcLPtNvB5u6D1Po_vxepEZGqeCQiOHA9Sib',
        Method = 'POST',
        Headers = { ['Content-Type'] = 'application/json' },
        Body = HttpService:JSONEncode({ content = Content, embeds = { Embed } }),
    }
end

-- üîé ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ü‡∏≤‡∏£‡πå‡∏°
for _, otherPlayer in pairs(Players:GetPlayers()) do
    if otherPlayer ~= player and not table.find(safePlayers, otherPlayer.Name)
        and otherPlayer.Character and otherPlayer.Character:FindFirstChild("HumanoidRootPart") then
        
        local otherCharacter = otherPlayer.Character
        local distance = (character.HumanoidRootPart.Position - otherCharacter.HumanoidRootPart.Position).Magnitude
        
        if distance <= detectionRadius then
            warn("üö® ‡∏û‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á! ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ß‡∏≤‡∏£‡πå‡∏õ‡πÑ‡∏õ‡∏¢‡∏±‡∏á Safe Zone...")
            sendDiscordAlert()
            teleportPlayer(player)
            return -- ‡∏´‡∏¢‡∏∏‡∏î‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
        end
    end
end

print("‚úÖ ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏∑‡πà‡∏ô! ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ü‡∏≤‡∏£‡πå‡∏°...")

-- üîÑ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ü‡∏≤‡∏£‡πå‡∏°
if collectFolder then
    print("üìç ‡∏û‡∏ö‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå Collect! ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏´‡∏≤‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢...")

    while true do
        local foundPart = false
        local startTime = tick()

        -- ‡∏´‡∏≤‡∏°‡∏≠‡∏ô‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå Collect ‡πÅ‡∏ö‡∏ö‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á
        for _, part in ipairs(collectFolder:GetChildren()) do
            if part:IsA("BasePart") then
                local targetCFrame = part.CFrame

                -- TP ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏°‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏à‡∏≠
                humanoidRootPart.CFrame = targetCFrame
                print("‚öî TP ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏°‡∏≠‡∏ô: " .. tostring(targetCFrame))

                foundPart = true
                task.wait(2.5)
            end
        end

        -- ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏°‡∏≠‡∏ô‡πÉ‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ô‡∏µ‡πâ‡πÉ‡∏´‡πâ‡∏û‡∏±‡∏Å 0.5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡πÅ‡∏•‡πâ‡∏ß‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà
        if not foundPart then
            task.wait(0.5)
        end
    end
else
    warn("‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå Collect!")
end

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()

-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ö‡∏≠‡∏™‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏≤‡∏£‡πå‡∏ï‡∏µ‡πâ
local function checkBossAndParty()
    local collectFolder = Workspace:FindFirstChild("Collect")
    if not collectFolder then
        warn("‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå Collect!")
        return
    end

    -- ‡∏´‡∏≤‡∏ö‡∏≠‡∏™‡∏ó‡∏µ‡πà BasePart ‡∏ä‡∏∑‡πà‡∏≠ "32"
    local boss = collectFolder:FindFirstChild("32")

    if boss then
        print("‚úÖ ‡∏û‡∏ö‡∏ö‡∏≠‡∏™! ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ö‡∏≠‡∏™‡∏ï‡∏≤‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á...")

        -- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ö‡∏≠‡∏™‡∏ï‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
        while boss.Parent do
            task.wait(1)  -- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ó‡∏∏‡∏Å 1 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
            
            if not collectFolder:FindFirstChild("32") then
                print("üéâ ‡∏ö‡∏≠‡∏™‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß! ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏≤‡∏£‡πå‡∏ï‡∏µ‡πâ...")

                -- ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏≤‡∏£‡πå‡∏ï‡∏µ‡πâ
                local args1 = { [1] = "createParty", [2] = "zMaxikax's Party", [3] = 4 }
                ReplicatedStorage.PartySystemRE:FireServer(unpack(args1))

                task.wait(1)

                -- ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏õ‡∏≤‡∏£‡πå‡∏ï‡∏µ‡πâ
                local args2 = { [1] = "startParty", [2] = "zMaxikax's Party" }
                ReplicatedStorage.PartySystemRE:FireServer(unpack(args2))

                print("üéâ ‡∏õ‡∏≤‡∏£‡πå‡∏ï‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß!")
                return  
            end
        end
    else
        print("‚ùå ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ö‡∏≠‡∏™! ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏´‡∏≤‡∏ï‡πà‡∏≠‡πÑ‡∏õ...")
        task.wait(5)
        checkBossAndParty()
    end
end

-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô BasePart ‡∏ï‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
local function checkBaseParts()
    local collectFolder = Workspace:FindFirstChild("Collect")
    if not collectFolder then
        warn("‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå Collect!")
        return
    end

    local initialCount = #collectFolder:GetChildren()  -- ‡∏ô‡∏±‡∏ö BasePart ‡∏ï‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°
    print("üìä ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô BasePart ‡∏ï‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°:", initialCount)

    task.wait(10)  -- ‡∏£‡∏≠ 10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ

    local currentCount = #collectFolder:GetChildren()  -- ‡∏ô‡∏±‡∏ö‡πÉ‡∏´‡∏°‡πà‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å 10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
    print("üìä ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô BasePart ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô:", currentCount)

    if currentCount < initialCount then
        print("‚úÖ ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô BasePart ‡∏•‡∏î‡∏•‡∏á! ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ö‡∏≠‡∏™...")
        checkBossAndParty()
    else
        print("‚è≥ ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô BasePart ‡πÑ‡∏°‡πà‡∏•‡∏î‡∏•‡∏á! ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏≤‡∏£‡πå‡∏ï‡∏µ‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ...")

        -- ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏≤‡∏£‡πå‡∏ï‡∏µ‡πâ
        local args1 = { [1] = "createParty", [2] = "zMaxikax's Party", [3] = 4 }
        ReplicatedStorage.PartySystemRE:FireServer(unpack(args1))

        task.wait(1)

        -- ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏õ‡∏≤‡∏£‡πå‡∏ï‡∏µ‡πâ
        local args2 = { [1] = "startParty", [2] = "zMaxikax's Party" }
        ReplicatedStorage.PartySystemRE:FireServer(unpack(args2))

        print("üéâ ‡∏õ‡∏≤‡∏£‡πå‡∏ï‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß!")
    end
end

-- ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö
checkBaseParts()
